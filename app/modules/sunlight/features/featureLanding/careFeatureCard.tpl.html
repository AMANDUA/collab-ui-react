<div class="cs-card-container">
  <cs-card-layout>
    <cs-card ng-repeat="careFeature in careFeaturesCtrl.filteredListOfFeatures" class="small header-background hoverable" ng-class="careFeature.color">
      <article ng-click="careFeaturesCtrl.editCareFeature((careFeature), $event)" hover-delay>
        <header class="card-header">
          <div class="header-with-right-icon">
            <p class="h4 ellipsis" title="{{careFeature.name}}"> {{careFeature.name}} </p>
            <div class="right">
              <button type="button" ng-click="careFeaturesCtrl.deleteCareFeature(careFeature, $event)" class="close" aria-label="{{::'common.close' | translate}}"ng-if=careFeaturesCtrl.userHasAccess(careFeature) ></button>
            </div>
          </div>
          <div class="care-sub-header">
            <div class="care-badge">
              <span  class="badge badge--outline" translate="careChatTpl.filterType.{{careFeature.mediaType}}"></span>
            </div>
            <div class="care-icon">
              <span ng-repeat="icon in careFeature.icons"><i class="icon {{icon}} {{careFeature.color}} icon-lg"></i></span>
            </div>
          </div>
          <div class="care-features-icon">
            <span ng-repeat="feature in careFeature.features">
              <i
                  class="icon {{careFeature.featureIcons[feature.featureType]}} cta icon-lg"
                  tooltip="{{careFeaturesCtrl.featureToolTip(feature.featureType, feature.name)}}"
                  tooltip-trigger="mouseenter focus"
                  tooltip-placement="top-left"
                  tooltip-animation="false">
              </i>
            </span>
          </div>
        </header>
        <section>
          <div class="warning-sign" ng-if=!careFeaturesCtrl.userHasAccess(careFeature)>
            <i class="icon icon-lg icon-warning"></i>
            <div class="warning-text">{{warning}}</div>
          </div>
        </section>
        <footer class="card-footer">
          <div class="embed-code-txt h6 left ellipsis">
            <div class="usage" ng-if="careFeature.featureType === 'customerVirtualAssistant'">
              <span class="usage-text">{{careFeaturesCtrl.templatesInUseText(careFeature)}}</span>
              <button ng-click="$event.stopPropagation()" popover-html="careFeature.templatesHtmlPopover" popover-placement="auto right" popover-append-to-body="false" class="icon icon-question-circle"></button>
            </div>
            <div class="email" ng-if="careFeature.email">{{careFeature.email}}</div>
            <div class="usage" ng-if="careFeature.featureType === 'expertVirtualAssistant'">
              <span class="usage-text usage-text-space">{{careFeaturesCtrl.templatesInUseText(careFeature)}},</span>
              <span ng-class="careFeature.spaces ? 'usage-text' : 'usage-text usage-warning'">{{careFeaturesCtrl.spacesInUseText(careFeature)}}</span>
              <button ng-click="$event.stopPropagation()" popover-html="careFeature.templatesHtmlPopover + '<br>' + careFeature.spacesHtmlPopover" popover-placement="auto right" popover-append-to-body="false" class="icon icon-question-circle"></button>
            </div>
          </div>
          <div class="right icon icon-download" ng-if="careFeature.mediaType !== 'virtualAssistant'" ng-click="careFeaturesCtrl.openEmbedCodeModal(careFeature, $event)" aria-label="{{::'common.download' | translate}}"></div>
        </footer>
      </article>
    </cs-card>
  </cs-card-layout>
</div>

<div class="aa-flex-container">
  <div class="aa-vertical-line"></div>
  <div ng-show="!actions.option" name="newStepForm" class="aa-panel" id="newStepForm{{schedule + index}}">
    <div class="panel-body aa-panel-body">
      <div class="row aa-flex-row">
        <h3 class="text-info" translate="autoAttendant.builderNewStep"></h3>
        <aa-help content="{{ :: 'autoAttendant.builderNewStepHelp' | translate }}" metric="New-Step-Title"></aa-help>
        <div class="aa-action-delete">
          <a href ng-click="actions.removeAction(index)">
            <span class="icon icon-close aa-action-delete-icon" aria-label="{{::'common.delete' | translate}}"></span>
          </a>
        </div>
      </div>
      <div class="row aa-flex-row">
        <p class="h6 aa-new-step-info" translate="autoAttendant.builderNewStepInfo"></p>
      </div>
      <div class="row aa-flex-row">
        <cs-select ng-model="actions.option" options="actions.options" labelfield="title" placeholder="actions.actionPlaceholder" icon="icon-chevron-down" id="actionSelect{{schedule + index}}" on-change-fn="actions.selectOption()"></cs-select>
        <aa-help content="{{ :: actions.getSelectHint() }}" metric="New-Step-Choose-Action"></aa-help>
      </div>
    </div>
  </div>

  <div ng-if="actions.option" class="aa-panel-lane" name="actionForm">
    <div class="panel-body aa-panel-body" name="{{actions.option.title}}">
      <div class="row aa-flex-row">
        <h3 ng-if="actions.option.ifTitle" class="text-info">{{actions.option.ifTitle}}</h3>
        <h3 ng-if="!actions.option.ifTitle" class="text-info">{{actions.option.title}}</h3>
        <aa-help ng-if="actions.option.help" content="{{ :: actions.option.help }}" show-link="actions.option.showHelpLink" metric="{{ :: actions.option.metric }}"></aa-help>
        <div class="aa-action-delete">
          <a href ng-click="actions.removeAction(index)">
            <span class="icon icon-close aa-action-delete-icon" aria-label="{{::'common.delete' | translate}}"></span>
          </a>
        </div>
      </div>
      <div class="row aa-flex-row">
        <!--
          currently ng-include templates loaded through ngtemplate-loader
          TODO: refactor - do not use 'ngtemplate-loader' or ng-include directive
        -->
        <div ng-controller="actions.getOptionController" ng-include="actions.option.url"></div>
      </div>
    </div>
  </div>

  <div class="panel aa-panel">
    <div class="aa-flex-container">
      <div class="aa-vertical-line"></div>
      <div class="panel-body aa-panel-round">
        <a href
          ng-click="addAction({index: index})"
          class="icon icon-plus-circle aa-add-step-icon"
          popover="{{::'autoAttendant.builderAddNewStep' | translate}}"
          popover-trigger="focus mouseenter"
          popover-animation="true"
          popover-placement="right"
          popover-append-to-body="false"
          aria-label="{{::'autoAttendant.builderAddNewStep' | translate}}">
        </a>
      </div>
    </div>
  </div>
</div>

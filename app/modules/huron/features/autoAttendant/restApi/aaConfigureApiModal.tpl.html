<div class="modal-header">
  <button type="button" class="close" ng-click="$dismiss();"></button>
  <h3 class="modal-title" translate="autoAttendant.configureRestApi"></h3>
</div>
<div class="modal-body">
  <div class="row">
    <div class="large-4 medium-4 small-12 columns">
      <label class="h4" translate="autoAttendant.URL"></label>
    </div>
    <div class="large-8 medium-8 small-12 columns">
      <div class="row">
        <div  ng-if="aaConfigureApiModal.isDynamicToggle()" class="aa-dynamic-prompt aa-message-width aa-message-only-type large-11 medium-11 small-11 columns">
          <dynamic-prompt class="small-12 columns dynamic-prompt aa-message-height" ng-model="aaConfigureApiModal.url" dynamic-tags="aaConfigureApiModal.dynamicTags" model-values="aaConfigureApiModal.dynamicValues" insert-element="insertElement" aa-keypress ng-keyup = "aaConfigureApiModal.saveDynamicUi()" id="configureApiUrl{{schedule + index}}" name="url" data-placeholder="{{:: aaConfigureApiModal.messageInputPlaceholder}}"></dynamic-prompt>
        <div ng-if="aaConfigureApiModal.getWarning()">
          <br></br>
          <div class="columns small-12 aa-div-click" ng-click="aaConfigureApiModal.toggleFullWarningMsg()" ng-blur="aaConfigureApiModal.closeFullWarningMsg()"> 
            <span class="ellipsis icon icon-warning warning aa-icon-font-size"></span>
            <span class="aa-text-overflow" data-ng-bind="aaConfigureApiModal.deletedSessionVariablesListAlongWithWarning"></span>
            <div ng-if = "aaConfigureApiModal.fullWarningMsgValue" class="aa-full-warning" data-ng-bind = "aaConfigureApiModal.deletedSessionVariablesListAlongWithWarning"></div>
          </div>
        </div>
          <aa-add-variable dynamic-prompt-id="configureApiUrl{{schedule + index}}" aa-schedule="{{schedule}}" aa-index="index" dynamic-element-string="aaConfigureApiModal.addElement" aa-element-type="{{aaConfigureApiModal.aaElementType}}"></aa-add-variable>
        </div>
        <div ng-if="!aaConfigureApiModal.isDynamicToggle()" class="aa-message-only-type large-12 small-12 columns">
          <textarea class="dynamic-prompt aa-message-type-textarea" aa-keypress ng-change="aaConfigureApiModal.saveDynamicUi()" ng-model="aaConfigureApiModal.url" type="text" id="configureApiUrl{{schedule + index}}" placeholder="{{ :: aaConfigureApiModal.messageInputPlaceholder }}" rows="4" maxlength="2000"></textarea>
        </div>
      </div>
    </div>
  </div>
  <hr/>
  <div class="row">
    <div class="large-4 medium-4 small-12 columns">
      <label class="h4 ng-scope" translate="autoAttendant.variableAssignment"></label>
    </div>
    <div class="large-8 medium-8 small-12 columns">
      <div ng-repeat="variable in aaConfigureApiModal.variableSet">
        <div class="row">
          <div class="large-8 medium-8 small-12 columns">
            <p translate="autoAttendant.responseDataBlock"></p>
          </div>
        </div>
        <div class="row">
          <div class="large-11 medium-11 small-11 columns">
            <input id="responseSelect" type="text" ng-model="variable.value" name="response" class="large-4 medium-4 small-4">
          </div>
          <div class="small-1 columns">
            <i ng-if="aaConfigureApiModal.variableSet.length > 1" class="icon icon-trash aa-trash-icon" aria-label="common.delete" ng-click="aaConfigureApiModal.deleteVariableSet($index);"></i>
          </div>
        </div>
        <div class="row">
          <div class="large-4 medium-4 small-6 columns">
            <p translate="autoAttendant.sessionVariable"></p>
          </div>
          <div class="large-6 medium-6 small-12 medium-pull-1 columns" ng-if="aaConfigureApiModal.isNewVariable(variable.variableName);">
            <p translate="autoAttendant.name"></p>
          </div>
        </div>
        <div class="row aa-rest-var">
          <ng-form name="nameKeyedInputForm">
            <div class="large-4 medium-4 small-8 columns">
              <cs-select id="sessionVar" ng-model="variable.variableName" name="sessionVar" options="aaConfigureApiModal.sessionVarOptions" placeholder="aaConfigureApiModal.selectVariablePlaceholder" icon="icon-chevron-down">
              </cs-select>
            </div>
            <div  ng-if="aaConfigureApiModal.isNewVariable(variable.variableName);" class="large-5 medium-5 small-10 medium-pull-2 columns">
              <input ng-model="variable.newVariableValue" cs-input type="text" ng-pattern="/^[a-zA-Z0-9 ]*$/" ng-required="true" ng-minlength="aaConfigureApiModal.minVariableLength" id="newVariableName" name="newVariableName" placeholder="{{ :: 'autoAttendant.callerInputNamePlaceHolder' | translate }}" ng-maxlength="aaConfigureApiModal.maxVariableLength" cs-input-messages="aaConfigureApiModal.validationMsgs" cs-input-warning-message="{{ :: 'autoAttendant.callerInputVariableDuplicateMsg' | translate }}" cs-input-warning="variable.isWarn" ng-change="aaConfigureApiModal.canShowWarn(variable);" cs-input-group-size="medium-12">
            </div>
          </ng-form>
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <a class="large-4 medium-4 small-4 medium-offset-4 columns" id="addVariableToSet" ng-click="aaConfigureApiModal.addVariableSet()">
    <i class="icon icon-plus-circle"></i>{{ :: 'autoAttendant.addVariableToSet' | translate }}</a>
  </div>
</div>
<div class="modal-footer">
  <button id="cancelBtn" class="btn" ng-click="aaConfigureApiModal.cancel()">{{ :: 'common.cancel' | translate }}</button>
  <button id="saveBtn" class="btn btn-primary" ng-click="aaConfigureApiModal.save()" ng-disabled="aaConfigureApiModal.isSaveDisabled();">{{ :: 'common.save' | translate }}</button>
</div>

<div ng-if="$ctrl.loading" class="text-center spinner-container">
  <i class="icon icon-spinner icon-2x"></i>
</div>
<div class="text-center" ng-if="!$ctrl.loading && $ctrl.data.nodes.length === 0" translate="hercules.nodesPage.noNodes"></div>
<table ng-if="!$ctrl.loading && $ctrl.data.nodes.length > 0">
  <thead>
    <tr>
      <th scope="col" translate="hercules.nodesPage.connectors"></th>
      <th scope="col" translate="hercules.nodesPage.status"></th>
      <th scope="col" translate="hercules.nodesPage.version"></th>
    </tr>
  </thead>
  <tbody ng-repeat="node in $ctrl.data.nodes | orderBy:'name' track by node.serial">
    <tr class="hostname">
      <td colspan="4">
        {{::node.name}}
        <div class="pull-right">
          <span translate="hercules.nodesPage.serial" translate-value-serial="{{::node.serial}}"></span>
          <span cs-dropdown>
            <button cs-dropdown-toggle class="actions-button btn--link dropdown-toggle" translate="common.actions"></button>
            <ul cs-dropdown-menu class="dropdown-menu dropdown-primary actions-services">
              <li ng-if="$ctrl.displayMaintenanceModeMenuItem($ctrl.data.targetType) && node.maintenanceMode === 'off'">
                <a ng-click="$ctrl.enableMaintenanceMode(node)">
                  <span translate="hercules.nodesPage.enableMaintenanceMode"></span>
                </a>
              </li>
              <li ng-if="$ctrl.displayMaintenanceModeMenuItem($ctrl.data.targetType) && node.maintenanceMode !== 'off'">
                <a ng-click="$ctrl.disableMaintenanceMode(node)">
                  <span translate="hercules.nodesPage.disableMaintenanceMode"></span>
                </a>
              </li>
              <li ng-if="$ctrl.displayGoToNodeMenuItem($ctrl.data.targetType)">
                <a target="_blank" ng-href="https://{{::node.name}}/">
                  <span translate="hercules.nodesPage.goToNode"></span>
                </a>
              </li>
            </ul>
          </span>
        </div>
      </td>
    </tr>
    <tr class="connector-row" ng-repeat="connector in node.connectors | orderBy:'connectorType':false:$ctrl.hybridConnectorsComparator" ng-click="$ctrl.openSidepanel(connector)" ng-class="{'active': $ctrl.isSidepanelOpen(connector)}">
      <td>{{::connector.service}}</td>
      <td>
        <span class="icon icon-circle status-indicator" ng-class="connector.status.cssClass"></span>
        {{::connector.statusName}}
        <span class="badge warning" ng-if="connector.maintenanceMode === 'on'" translate="hercules.fusion.list.maintenance"></span>
        <span class="badge" ng-if="connector.maintenanceMode === 'pending'" translate="hercules.fusion.list.pendingMaintenance"></span>
        <span class="badge info" ng-if="connector.hasUpgradeAvailable" translate="hercules.fusion.list.upgrade"></span>
      </td>
      <td>{{::connector.version}}</td>
    </tr>
  </tbody>
</table>

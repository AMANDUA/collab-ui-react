<div>
  <form name="inputSipDestinationForm" class="hercules-sip-destination-table">
    <div class="input-line">
      <input
        cs-input
        type="text"
        cs-input-group-size="medium-7"
        ng-disabled="$ctrl.savingSip"
        placeholder="{{'hercules.settings.call.sipDomainPlaceholder' | translate}}"
        ng-class="{ 'hercules-input-error': $ctrl.warnSipDestination() }"
        id="sipDomain"
        ng-model="$ctrl.sipDomain"
        required>
      <verify-sip-destination
        destination-url="$ctrl.sipDomain"
        on-destination-save="$ctrl.onDestinationSave(warn)"
        on-test-started="$ctrl.onTestStarted()"
        on-result-ready="$ctrl.onResultReady(succeeded, resultSet)"></verify-sip-destination>
      <div class="saving-spinner" ng-if="$ctrl.savingSip">
        <i class="icon icon-spinner"></i>
      </div>
    </div>
    <div ng-show="$ctrl.sipDestinationTestSucceeded" class="sip-destination-test-summary">
      <i class="icon icon-checkbox"></i>
      <span translate="hercules.settings.verifySipDestination.testSucceeded"></span>
      <span>
        <a href ng-click="$ctrl.openSipTestResults()" translate="hercules.settings.verifySipDestination.viewTestResults"></a>
      </span>
    </div>
    <div ng-show="$ctrl.sipDestinationTestSucceeded === false" class="sip-destination-test-summary">
      <i ng-if="!$ctrl.sipDestinationTestSucceeded" class="icon icon-error"></i>
      <span ng-if="$ctrl.sipDestinationTestResultSet.type === 'no_dns_hops_found'">
        <span class="fail" translate="hercules.settings.verifySipDestination.fixes.NoDNSHopsFound"></span>
      </span>
      <span ng-if="$ctrl.sipDestinationTestResultSet.type === 'invalid_sip_destination'">
        <span class="fail" translate="hercules.settings.verifySipDestination.fixes.InvalidSIPDestination" translate-value-domain="{{$ctrl.originalValue}}"></span>
      </span>
      <span ng-if="$ctrl.sipDestinationTestResultSet.type === 'unexpected_exception'">
        <span class="fail" translate="hercules.settings.verifySipDestination.fixes.UnexpectedError"></span>
      </span>
      <span ng-if="$ctrl.sipDestinationTestResultSet.type === 'ip' || $ctrl.sipDestinationTestResultSet.type === 'dnssrv' || $ctrl.sipDestinationTestResultSet.type === 'dnshost'" translate="hercules.settings.verifySipDestination.testFailed"></span>
      <span ng-if="$ctrl.sipDestinationTestResultSet.type === 'ip' || $ctrl.sipDestinationTestResultSet.type === 'dnssrv' || $ctrl.sipDestinationTestResultSet.type === 'dnshost'">
        <a href ng-click="$ctrl.openSipTestResults()" translate="hercules.settings.verifySipDestination.viewTestResults"></a>
      </span>
    </div>
  </form>
  <div class="cs-input__help-text sip-details">
    <div translate="hercules.sipExplanation.line1"></div>
    <ul>
      <li translate="hercules.sipExplanation.line2" translate-compile></li>
      <li translate="hercules.sipExplanation.line3" translate-compile></li>
      <li translate="hercules.sipExplanation.line4" translate-compile></li>
    </ul>
    <p translate="hercules.sipExplanation.line5alt" translate-compile></p>
  </div>
</div>

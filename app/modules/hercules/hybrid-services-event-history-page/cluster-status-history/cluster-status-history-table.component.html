<div ng-if="$ctrl.loadingPage">
  <span class="spinner-event-history">
    <i class="icon icon-spinner"></i>
  </span>
</div>
<table ng-if="$ctrl.allEvents.items.length > 1 && !$ctrl.loadingPage">
  <thead>
    <tr>
      <th translate="hercules.eventHistory.table.event"></th>
      <th translate="hercules.eventHistory.table.severity"></th>
      <th translate="hercules.eventHistory.table.type"></th>
      <th translate="hercules.eventHistory.table.service"></th>
      <th translate="hercules.eventHistory.table.resource"></th>
      <th translate="hercules.eventHistory.table.performedBy"></th>
      <th translate="hercules.eventHistory.table.time"></th>
    </tr>
  </thead>
  <tbody>
    <tr ng-repeat="event in $ctrl.allEvents.items | orderBy:'timeStamp' track by $index" class="item-row" ng-click="$ctrl.openSidepanel(event)" ng-show="$ctrl.isFilterSetToService(event.connectorType) && $ctrl.isFilterSetToResource(event.hostname, event.clusterName)" ng-class="{'active': $ctrl.isSidepanelOpen(event)}">
      <td>{{event.title}}</td>
      <td ng-if="event.severity === 'critical'"><span class="badge alert" translate="hercules.eventHistory.table.critical"></span></td>
      <td ng-if="event.severity === 'error'"><span class="badge alert" translate="hercules.eventHistory.table.error"></span></td>
      <td ng-if="event.severity === 'warning'"><span class="badge warning" translate="hercules.eventHistory.table.warning"></span></td>
      <td ng-if="event.severity === 'alert'"><span class="badge" translate="hercules.eventHistory.table.info"></span></td>
      <td ng-if="event.severity === 'RESOLVED'"><span class="badge success" translate="hercules.eventHistory.table.resolved"></span></td>
      <td ng-if="event.severity === 'IGNORED'"><span class="badge warning" translate="hercules.eventHistory.table.ignored"></span></td>
      <td ng-if="event.severity === 'NONE'"><span translate="hercules.eventHistory.table.none"></span></td>
      <td>{{$ctrl.getEventType(event)}}</td>
      <td>{{$ctrl.parseServiceForCluster(event.connectorType)}}</td>
      <td>{{event.resourceName}}</td>
      <td ng-if="event.username">{{event.username}}</td>
      <td ng-if="!event.username">{{event.userId}}</td>
      <td>{{$ctrl.formatTime(event.timestamp)}}</td>
    </tr>
  </tbody>

</table>
<div ng-if="$ctrl.allEvents.items.length === 0 && !$ctrl.loadingPage">
  <p class="no-events-found" translate="hercules.eventHistory.noEventsFound"></p>
</div>

<div class="modal-header">
  <button type="button" class="close" ng-click="$dismiss()">
    <span class="sr-only" translate="common.close"></span>
  </button>
  <h4 class="modal-title"
      translate="hercules.clusterHistoryTable.windowTitle"
      translate-values="{clusterName: vm.clusterName}"></h4>
</div>
<div class="modal-body fusion-cluster-settings">

  <span class="spinner-cluster-list-history"
        ng-if="vm.loading">
      <i class="icon icon-spinner"></i>
  </span>

  <div ng-if="!vm.loading && vm.errorMessage"
       translate="hercules.clusterHistoryTable.errorMessage"
       translate-values="{ errorMessage: vm.errorMessage }">
  </div>

  <div ng-if="!vm.loading && !vm.errorMessage">
    <table>
      <thead>
      <tr>
        <th>Property</th>
        <th>New Value</th>
        <th>Previous Value</th>
        <th>Changed by User</th>
        <th>Time</th>
      </tr>
      </thead>

      <tbody>
      <tr ng-repeat="item in vm.formattedData">
        <td>
          {{'hercules.clusterHistoryTable.types.' + item.type | translate}}
        </td>

        <td>
          {{item.newValue}}
        </td>

        <td>
          {{item.previousValue}}
        </td>

        <td ng-if="item.principalType === 'PERSON'">{{item.username}}</td>
        <td ng-if="item.principalType !== 'PERSON'">(automatic)</td>

        <td>{{vm.getLocalizedTimeAndDate(item.timestamp)}}</td>
      </tr>
      </tbody>

    </table>
  </div>

</div>
<div class="modal-footer">
  <button class="btn btn--primary"
          type="button"
          ng-click="$dismiss()">
    <span translate="common.close"></span>
  </button>
</div>

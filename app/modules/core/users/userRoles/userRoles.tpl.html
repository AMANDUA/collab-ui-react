<form name="rolesEdit.form" role="form" class="side-panel-form">
  <cs-sp-buttons ng-show="rolesEdit.form.$dirty" title="{{'rolesPanel.editUser' | translate}}">
    <button cs-btn id="saveButton" class="btn btn--primary" ng-click="updateRoles()" type="button" ng-disabled="rolesEdit.form.$invalid" loading="updatingUser">{{::'common.save'|translate}}</button>
    <button id="cancelButton" translate="common.cancel" ng-click="resetFormData()" type="button" ng-disabled="updatingUser"></button>
  </cs-sp-buttons>
  <cs-sp-container cs-tabindex="rolesEdit.form.$dirty ? -1 : 0">
    <cs-sp-section>
      <div id="rolesDetailsPanel">
        <div class="edit-panel">
          <form name="rolesObj.form" role="form">
            <div ng-if="showUserDetailSection">
              <div class="form-group">
                <label for="firstNameInput" translate="rolesPanel.firstName"></label>
                <input id="firstNameInput" type="text" class="form-control" name="firstName" ng-disabled="dirsyncEnabled" ng-model="formUserData.name.givenName" ng-change="checkAdminDisplayName()">
              </div>
              <div class="form-group">
                <label for="lastNameInput" translate="rolesPanel.lastName"></label>
                <input id="lastNameInput" type="text" class="form-control" name="lastName" ng-disabled="dirsyncEnabled" ng-model="formUserData.name.familyName" ng-change="checkAdminDisplayName()">
              </div>
              <div class="form-group">
                <input cs-input
                  type="text"
                  id="displayNameInput" name="displayName"
                  ng-disabled="dirsyncEnabled"
                  ng-model="formUserData.displayName"
                  cs-input-label='{{::"usersPage.displayNameHeader" | translate}}'
                  ng-change="checkAdminDisplayName()"
                  cs-input-size="medium-12"
                  cs-input-messages="messages.displayName">
              </div>

              <div class="form-group">
                <label for="customerEmailInput" translate="rolesPanel.emailAddress"></label>
                <input id="customerEmailInput" type="email" class="form-control" name="customerEmail" ng-model="currentUser.userName" disabled="true">
              </div>

              <div class="form-group">
                <label for="sipAddressesInput" translate="usersPage.sipDomain"></label>
                <input id="sipAddressesInput" type="text" class="form-control" name="sipAddresses" value="{{sipAddr}}" disabled="true">
              </div>
            </div>
            <div class="admin-roles-panel" ng-if="showRolesSection">
              <section-title title-key="rolesPanel.administratorRoles"></section-title>
              <div class="cs-radio-group">
                <div class="admin-options" id="no-admin-options">
                  <input
                    cs-input
                    type="radio"
                    ng-model="rolesObj.adminRadioValue"
                    ng-value="noAdmin.value"
                    name="adminRoles"
                    id="{{noAdmin.id}}"
                    cs-input-label="{{noAdmin.label}}"
                    ng-click="clearCheckboxes();"
                    ng-disabled="isNotEditable">
                </div>

                <div class="admin-options" id="full-admin-options">
                  <input
                    cs-input
                    type="radio"
                    ng-model="rolesObj.adminRadioValue"
                    ng-value="fullAdmin.value"
                    name="adminRoles"
                    id="{{fullAdmin.id}}"
                    cs-input-label="{{fullAdmin.label}}"
                    ng-click="clearCheckboxes();"
                    ng-disabled="isNotEditable">
                  <i aria-label="{{::roleTooltips.fullAdminAria}}"
                    tooltip-html-unsafe="{{::roleTooltips.fullAdmin}}"
                    tooltip-placement="right"
                    tooltip-trigger="focus mouseenter"
                    class="icon icon-information role-information"
                    tabindex="0"></i>
                </div>

                <div class="admin-options" id="readonly-admin-options" ng-if="enableReadonlyAdminOption">
                  <input
                    cs-input
                    type="radio"
                    ng-model="rolesObj.adminRadioValue"
                    ng-value="readonlyAdmin.value"
                    name="adminRoles"
                    id="{{readonlyAdmin.id}}"
                    cs-input-label="{{readonlyAdmin.label}}"
                    ng-click="clearCheckboxes();"
                    ng-disabled="isNotEditable">
                  <i aria-label="{{::roleTooltips.readonlyAdmin}}"
                    tooltip="{{::roleTooltips.readonlyAdmin}}"
                    tooltip-placement="right"
                    tooltip-trigger="focus mouseenter"
                    class="icon icon-information role-information"
                    tabindex="0"></i>
                </div>

                <div class="admin-options" id="partial-admin-options">
                  <input cs-input type="radio"
                    ng-model="rolesObj.adminRadioValue"
                    ng-value="partialAdmin.value"
                    name="adminRoles"
                    id="{{partialAdmin.id}}"
                    cs-input-label="{{partialAdmin.label}}"
                    ng-click="supportCheckboxes();"
                    ng-disabled="isNotEditable"
                    cs-input-messages="messages.partialAdmin">
                </div>
                <div class="admin-options indent-checkbox" id="sales-admin-options" ng-show="isPartner">
                  <input cs-input type="checkbox"
                    id="salesAdminCkbx"
                    cs-input-label="{{::'rolesPanel.salesAdmin' | translate}}"
                    ng-model="rolesObj.salesAdminValue"
                    ng-change="partialCheckboxes()"
                    ng-disabled="isNotEditable">
                  <i aria-label="{{::roleTooltips.salesAdminAria}}"
                    tooltip-html-unsafe="{{::roleTooltips.salesAdmin}}"
                    tooltip-placement="right"
                    tooltip-trigger="focus mouseenter"
                    class="icon icon-information role-information"
                    tabindex="0"></i>
                </div>
                <div class="admin-options indent-checkbox" ng-show="false">
                  <input cs-input type="checkbox"
                    id="billingAdminCkbx"
                    cs-input-label="{{::'rolesPanel.billingAdmin' | translate}}"
                    ng-model="rolesObj.billingAdminValue"
                    ng-change="partialCheckboxes()"
                    ng-disabled="isNotEditable">
                  <i aria-label="{{::roleTooltips.billingAdminAria}}"
                    tooltip-html-unsafe="{{::roleTooltips.billingAdmin}}"
                    tooltip-placement="right"
                    tooltip-trigger="focus mouseenter"
                    class="icon icon-information role-information"
                    tabindex="0"></i>
                </div>
                <div class="admin-options indent-checkbox">
                  <input cs-input type="checkbox"
                    id="supportAdminCkbx"
                    cs-input-label="{{::'rolesPanel.supportAdmin' | translate}}"
                    ng-model="rolesObj.supportAdminValue"
                    ng-change="partialCheckboxes()"
                    ng-disabled="isNotEditable || hasUserOrDeviceAdmin()">
                  <i aria-label="{{::roleTooltips.supportAdminAria}}"
                    tooltip-html-unsafe="{{::roleTooltips.supportAdmin}}"
                    tooltip-placement="right"
                    tooltip-trigger="focus mouseenter"
                    class="icon icon-information role-information"
                    tabindex="0"></i>
                </div>
                <div class="admin-options indent-checkbox" ng-if="showUserRole">
                  <input cs-input type="checkbox"
                    id="userAdminCkbx"
                    cs-input-label="{{::'rolesPanel.userAdmin' | translate}}"
                    ng-model="rolesObj.userAdminValue"
                    ng-change="partialCheckboxes()"
                    ng-disabled="isNotEditable || rolesObj.supportAdminValue">
                  <i aria-label="{{::roleTooltips.userAdminAria}}"
                    tooltip-html-unsafe="{{::roleTooltips.userAdmin}}"
                    tooltip-placement="right"
                    tooltip-trigger="focus mouseenter"
                    class="icon icon-information role-information"
                    tabindex="0"></i>
                </div>
                <div class="admin-options indent-checkbox" ng-if="showDeviceRole">
                  <input cs-input type="checkbox"
                    id="deviceAdminCkbx"
                    cs-input-label="{{::'rolesPanel.deviceAdmin' | translate}}"
                    ng-model="rolesObj.deviceAdminValue"
                    ng-change="partialCheckboxes()"
                    ng-disabled="isNotEditable || rolesObj.supportAdminValue">
                  <i aria-label="{{::roleTooltips.deviceAdmin}}"
                    tooltip-html-unsafe="{{::roleTooltips.deviceAdmin}}"
                    tooltip-placement="right"
                    tooltip-trigger="focus mouseenter"
                    class="icon icon-information role-information"
                    tabindex="0"></i>
                </div>
              </div>

              <div class="admin-roles-panel" ng-if="showHelpDeskRole">
                <p><span class="edit-title" translate="rolesPanel.helpdesk"></span></p>

                <div class="admin-options">
                  <input cs-input type="checkbox"
                    id="helpdeskCkbx"
                    cs-input-label="{{::'ciRoles.atlas-portal.partner.helpdesk' | translate}}"
                    ng-model="rolesObj.helpdeskValue"
                    ng-change="helpdeskOnCheckedHandler()"
                    ng-disabled="isNotEditable">
                  <i aria-label="{{::roleTooltips.helpdesk}}"
                    tooltip="{{::roleTooltips.helpdesk}}"
                    tooltip-placement="right"
                    tooltip-trigger="focus mouseenter"
                    class="icon icon-information role-information"
                    tabindex="0"></i>
                </div>
                <div class="admin-options indent-checkbox" ng-if="showOrderAdminRole">
                  <input cs-input type="checkbox"
                    id="orderadminCkbx"
                    cs-input-label="{{::'ciRoles.atlas-portal.partner.orderadmin' | translate}}"
                    ng-model="rolesObj.orderAdminValue"
                    ng-change="orderadminOnCheckedHandler()"
                    ng-disabled="isNotEditable">
                  <i aria-label="{{::roleTooltips.orderAdmin}}"
                    tooltip="{{::roleTooltips.orderAdmin}}"
                    tooltip-placement="right"
                    tooltip-trigger="focus mouseenter"
                    class="icon icon-information role-information"
                    tabindex="0"></i>
                </div>
                <div class="admin-options" ng-if="showPartnerManagementRole">
                  <input cs-input type="checkbox"
                    id="partnermgmtCkbx"
                    cs-input-label="{{::'ciRoles.atlas-portal.cisco.partnermgmt' | translate}}"
                    ng-model="rolesObj.partnerManagementValue"
                    ng-change="partnerManagementOnCheckedHandler()"
                    ng-disabled="isNotEditable">
                  <i aria-label="{{::roleTooltips.partnerMgmt}}"
                    tooltip="{{::roleTooltips.partnerMgmt}}"
                    tooltip-placement="right"
                    tooltip-trigger="focus mouseenter"
                    class="icon icon-information role-information"
                    tabindex="0"></i>
                </div>
              </div>

              <div class="admin-roles-panel" ng-if="showComplianceRole && !isUserAdminUser">
                <p><span class="edit-title" translate="rolesPanel.compliance"></span></p>

                <div class="admin-options">
                  <input cs-input type="checkbox"
                    id="complianceCkbx"
                    cs-input-label="{{::'ciRoles.compliance' | translate}}"
                    ng-model="rolesObj.complianceValue"
                    ng-disabled="isNotEditable">
                  <i aria-label="{{::roleTooltips.compliance}}"
                    tooltip="{{::roleTooltips.compliance}}"
                    tooltip-placement="right"
                    tooltip-trigger="focus mouseenter"
                    class="icon icon-information role-information"
                    tabindex="0"></i>
                </div>
              </div>
            </div>
          </form>
        </div>
      </div>
    </cs-sp-section>
    <cs-sp-section ng-if="showSecuritySection && isEnterpriseCustomer">
      <section-title title-key="usersPreview.security"></section-title>
      <div class="reset-access-panel">
        <p class="reset-access-segment-title">
          <span translate="usersPreview.resetAccess"></span>
          <cr-pro-pack-icon ng-if="!isProPack"
            aria-label="{{::roleTooltips.proPack}}"
            tooltip-trigger="focus mouseenter"
            tooltip-animation="true"
            tooltip-placement="right"
            tooltip="{{::roleTooltips.proPack}}"
            tabindex="0">
          </cr-pro-pack-icon>
        </p>
        <p class="reset-access-segment-description"><span translate="usersPreview.resetAccessDetail"></span><a target="_blank" href="https://collaborationhelp.cisco.com/article/en-us/DOC-19842" translate="usersPreview.learnMore"></a></p>
        <button cs-btn class="btn btn--primary central" ng-click="resetAccess()" type="button" loading="resettingAccess" ng-disabled="!isProPack"><span translate="usersPreview.resetAccess"></button>
      </div>
    </cs-sp-section>
  </cs-sp-container>
</form>

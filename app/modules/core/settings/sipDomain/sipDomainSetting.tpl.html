<div class="domain-page">
  <div class="domain-flow">
    <div ng-if="vm.isSSAReserved" ng-class="{'domain-description': vm.showSaveButton}">
      <p translate="firstTimeWizard.currentSubdomainDescription" translate-values="{count: vm.subdomainCount}" translate-interpolation="messageformat"></p>
      <p ng-if="!vm.isCsc" translate="firstTimeWizard.subdomainChangesDescription"></p>
    </div>
    <p ng-if="!vm.isSSAReserved" translate="firstTimeWizard.subdomainDescription" translate-values="{count: vm.subdomainCount}" translate-interpolation="messageformat"></p>

    <p ng-class="{'domain-space': !vm.showSaveButton}">
      <a href class="redirect-link" translate="firstTimeWizard.setSipDomainLink" ng-click="vm.openSipHelpWiki()"></a>
    </p>
    <br>
    <p class="domain" translate="firstTimeWizard.reservedSubdomains"></p>
    <div class="domain-space">
      <i class="icon icon-error domain-icon domain-error" ng-if="vm.form.$invalid && !vm.emptyOrUnchangedInput()"></i>
      <i class="icon icon-check domain-icon domain-success" ng-if="!vm.form.$invalid && vm.verified"></i>
      <span class="p">{{vm.inputValue}}.call{{vm.domainSuffix}}</span>
    </div>
    <div ng-if="vm.isRoomLicensed">
      <i class="icon icon-error domain-icon domain-error" ng-if="vm.form.$invalid && !vm.emptyOrUnchangedInput()"></i>
      <i class="icon icon-check domain-icon domain-success" ng-if="!vm.form.$invalid && vm.verified"></i>
      <span class="p">{{vm.inputValue}}.room{{vm.domainSuffix}}</span>
    </div>

    <p ng-if="!vm.sipForm && vm.isSSAReserved && !vm.isCsc" class="domain-space">
      <a href id="editSubdomainLink" class="redirect-link" translate="firstTimeWizard.editSubdomain" ng-click="vm.editSubdomain()"></a>
    </p>
    <br>
    <p class="domain" ng-if="vm.sipForm || !vm.isSSAReserved" translate="firstTimeWizard.enterSubdomain"></p>

    <form ng-show="vm.sipForm || !vm.isSSAReserved" name="vm.form" novalidate role="form" class="domain-form">
      <div class="domain-input" ng-if="vm.sipForm || !vm.isSSAReserved">
        <input cs-input type="text"
          id="sipDomainInput"
          name="sipDomainInput"
          cs-input-messages="vm.messages"
          ng-change="vm.notVerified()"
          ng-required="true"
          ng-maxlength="40"
          ng-model="vm.inputValue">
      </div>
      <div class="domain-buttons" ng-if="vm.sipForm || !vm.isSSAReserved">
        <button cs-btn type="button"
          class="btn btn--cta domain-button"
          loading="vm.isSubdomainLoading"
          ng-click="vm.verifyAvailabilityAndValidity()"
          ng-disabled="vm.emptyOrUnchangedInput() || this.saving">
          <span translate="firstTimeWizard.setSipDomainCheckAvailability"></span>
        </button>
        <button type="button"
          class="btn"
          translate="common.cancel"
          ng-click="vm.toggleSipForm(); vm.resetFocus();"
          ng-disabled="this.saving">
        </button>
      </div>
    </form>
  </p></div>
</div>

<div class="enterprise-sipDomain-page" ng-if="vm.toggle === false">
  <div class="title space-flow">
    <p class="paragraphSpacing">
      <span translate="firstTimeWizard.setSipDomainDescription"></span>
    </p>
    <span>
      <a class="redirect-link" href translate="firstTimeWizard.setSipDomainLink" ng-click="vm.openSipHelpWiki()"></a>
    </span>
  </div>
  <div class="row-fluid">
    <form name="sipDomainForm" novalidate>
      <div class="row">
        <p translate="firstTimeWizard.setSipDomainMsg"></p>
        <div class="cs-input-group medium-3 columns" ng-class="{'error': vm.validateSipDomain()}">
          <input class="sip-domain-input col-lg-5"
                 name="sipDomainInput"
                 type="text"
                 placeholder="{{'firstTimeWizard.setSipDomainPlaceholder' | translate}}"
                 ng-model="vm.inputValue"
                 ng-disabled="vm.isDisabled">
          <div class="cs-input__messages error-msg-spacing" role="alert" ng-if="vm.validateSipDomain()">
            <div class="message">{{vm.errorMsg}}</div>
          </div>
        </div>
        <div class="col-lg-7">
          <button id="checkAvailabilityBtn" class="space btn--cta" ng-click="vm.checkSipDomainAvailability()" translate="firstTimeWizard.setSipDomainCheckAvailability" ng-disabled="vm.isButtonDisabled"></button>
        </div>
      </div>
    </form>
  </div>
  <div class="row-fluid error-msg-spacing">
    <p ng-if="!vm.isSSAReserved" class="url-examples-style" translate="firstTimeWizard.setSipDomainCompNames" translate-values="{count: vm.subdomainCount}" translate-interpolation="messageformat"></p>
    <p ng-if="vm.isSSAReserved" class="url-examples-style" translate="firstTimeWizard.setSipDomainAsssignedNames" translate-values="{count: vm.subdomainCount}" translate-interpolation="messageformat"></p>
    <div class="domain-check-space url-examples-style">
      <h5 class="inline">{{vm.inputValue}}.call{{vm.domainSuffix}}</h5>
      <i ng-if="vm.isUrlAvailable" class="green-check space icon icon-checkbox"></i>
      <i ng-if="vm.isError" class="red-error-icon space icon icon-error"></i>
      <i ng-if="vm.isLoading" class="space icon icon-spinner"></i>
    </div>
    <div ng-if="vm.isRoomLicensed" class="domain-check-space url-examples-style">
      <h5 class="inline">{{vm.inputValue}}.room{{vm.domainSuffix}}</h5>
      <i ng-if="vm.isUrlAvailable" class="green-check space icon icon-checkbox"></i>
      <i ng-if="vm.isError" class="red-error-icon space icon icon-error"></i>
      <i ng-if="vm.isLoading" class="space icon icon-spinner"></i>
    </div>
  </div>
  <div class="row-fluid" ng-if="vm.isUrlAvailable">
    <div class="confirm-box">
      <cs-checkbox ckid="confirmSaveCheckBox" ng-model="vm.isConfirmed" ng-click ="vm.checkSSAReservation()" label="{{:: 'firstTimeWizard.setSipDomainConfirmText' | translate}}"></cs-checkbox>
    </div>
  </div>
  <div class="row-fluid" ng-if="vm.showSaveButton && vm.isUrlAvailable && vm.isConfirmed">
    <div class="save-box">
      <button id="save"
              ng-disabled="!vm.isConfirmed"
              class="space btn--primary"
              ng-click="vm.saveDomain()"
              translate="common.save"></button>
    </div>
  </div>
</div>

<!-- Feature Toggle for updating the subdomain -->
<div class="domain-page" ng-if="vm.toggle">
  <div class="domain-flow">
    <div ng-if="vm.isSSAReserved" ng-class="{'domain-description': vm.showSaveButton}">
      <p translate="firstTimeWizard.currentSubdomainDescription" translate-values="{count: vm.subdomainCount}" translate-interpolation="messageformat"></p>
      <p translate="firstTimeWizard.subdomainChangesDescription"></p>
    </div>
    <p ng-if="!vm.isSSAReserved" translate="firstTimeWizard.subdomainDescription" translate-values="{count: vm.subdomainCount}" translate-interpolation="messageformat"></p>

    <p ng-class="{'domain-space': !vm.showSaveButton}">
      <a class="redirect-link" href translate="firstTimeWizard.setSipDomainLink" ng-click="vm.openSipHelpWiki()"></a>
    </p>

    <p class="domain domain-space-two" translate="firstTimeWizard.reservedSubdomains"></p>
    <div class="domain-space">
      <i class="icon icon-error domain-icon domain-error" ng-if="vm.form.$invalid && !vm.emptyOrUnchangedInput()"></i>
      <i class="icon icon-check domain-icon domain-success" ng-if="!vm.form.$invalid && vm.verified"></i>
      <span class="p">{{vm.inputValue}}.call{{vm.domainSuffix}}</span>
    </div>
    <div ng-if="vm.isRoomLicensed">
      <i class="icon icon-error domain-icon domain-error" ng-if="vm.form.$invalid && !vm.emptyOrUnchangedInput()"></i>
      <i class="icon icon-check domain-icon domain-success" ng-if="!vm.form.$invalid && vm.verified"></i>
      <span class="p">{{vm.inputValue}}.room{{vm.domainSuffix}}</span>
    </div>

    <p ng-if="!vm.sipForm && vm.isSSAReserved" class="domain-space">
      <a class="redirect-link" translate="firstTimeWizard.editSubdomain" ng-click="vm.toggleSipForm()"></a>
    </p>

    <p class="domain domain-space-two" ng-if="vm.sipForm || !vm.isSSAReserved" translate="firstTimeWizard.enterSubdomain"></p>
    <form name="vm.form" novalidate role="form" class="domain-form">
      <div class="domain-input" ng-if="vm.sipForm || !vm.isSSAReserved">
        <input cs-input
          id="sipDomainInput"
          name="sipDomainInput"
          type="text"
          cs-input-messages="vm.messages"
          ng-change="vm.notVerified()"
          ng-required="true"
          ng-maxlength="40"
          ng-model="vm.inputValue">
      </div>
      <div ng-if="vm.sipForm || !vm.isSSAReserved" class="domain-buttons">
        <button type="button" class="btn btn--cta" translate="firstTimeWizard.setSipDomainCheckAvailability" ng-click="vm.verifyAvailabilityAndValidity()" ng-disabled="vm.emptyOrUnchangedInput() || this.saving"></button>
        <button type="button" class="btn" translate="common.cancel" ng-click="vm.toggleSipForm()" ng-disabled="this.saving"></button>
      </div>
    </form>
  </p></div>
</div>

<div class="subscriptions-container">
  <cr-trial-notice-banner ng-if="mcpSub.hasEnterpriseTrial || mcpSub.trialUrlFailed"></cr-trial-notice-banner>
  <cs-alert-banner class="overage-warning" ng-if="mcpSub.overage && mcpSub.isProPackEnabled" type="danger">
    <span class="icon icon-warning"></span>
    <span translate="subscriptions.overageWarning"></span>
  </cs-alert-banner>
  <cs-card-layout block-view="true">
    <cs-card class="full detail-view" ng-repeat="subscription in mcpSub.subscriptionDetails" ng-if="mcpSub.subscriptionDetails.length > 1" ng-class="{ 'subscription-expanded': subscription.viewAll }">
      <article><section>
        <subscription-details subscription="subscription"></subscription-details>
      </section></article>
    </cs-card>

    <cs-card class="full subscriptions" ng-if="mcpSub.hybridServices.length > 0 || mcpSub.visibleSubscriptions">
      <article>
        <header>
          <span ng-if="!mcpSub.licenseSummary" class="column medium-2 card-title h3" translate="subscriptions.licenseSummary"></span>
          <span ng-if="mcpSub.licenseSummary" class="column medium-2 card-title" ng-class="mcpSub.oneOnlineSub ? 'h5' : 'h3'">{{mcpSub.licenseSummary}}</span>
          <div class="subscription-badge" ng-if="mcpSub.showSingleSub && mcpSub.subscriptionDetails[0].isOnline">
            <span class="badge ng-scope" ng-class="mcpSub.subscriptionDetails[0].badge">{{::mcpSub.subscriptionDetails[0].endDate}}</span>
          </div>
          <div class="column medium-5 sub-name right" ng-if="mcpSub.showSingleSub">
            <div class="container text-right">
              <bmmp-subscription-upgrade-button ng-if="mcpSub.subscriptionDetails[0].isOnline"
                class="btn btn--primary upgrade-button"
                bmmp-attr="mcpSub.bmmpAttr"
                widget-location="navigation-bar">
              </bmmp-subscription-upgrade-button>
            </div>
            <div class="right">
              <span class="h6" translate="subscriptions.subscription"></span>
              <span class="h6">{{::mcpSub.subscriptionDetails[0].subscriptionId}}</span>
            </div>
          </div>
        </header>
        <section>
          <div class="row" ng-repeat="licenseCategory in mcpSub.licenseCategory" ng-show="mcpSub.showCategory(licenseCategory)">
            <h5 class="columns medium-2 category-title">{{::licenseCategory.label}}</h5>
            <div class="columns medium-10 subscription-column">
              <!-- if category does not wrap offers -->
              <div ng-if="!mcpSub.wrapsOffers(licenseCategory)" class="category-data-section" ng-repeat="offer in licenseCategory.offers">
                <subscription-row offer="offer" wrapped="false"></subscription-row>
              </div>

              <!-- if category wraps offers -->
              <div ng-if="mcpSub.wrapsOffers(licenseCategory)" class="category-data-section" ng-repeat="wrapper in licenseCategory.offerWrapper" ng-class="{'item-without-borders': mcpSub.isSharedMeetingsLicense, 'item-with-borders': !mcpSub.isSharedMeetingsLicense}">
                <div class="license-item" ng-repeat="offer in wrapper.offers">
                  <subscription-row offer="offer" wrapped="true"></subscription-row>
                </div>
              </div>
            </div>
          </div>

          <div class="row category-row" ng-show="mcpSub.hybridServices && mcpSub.hybridServices.length > 0">
            <div class="columns medium-2 category-title">
              <span class="h5" translate="subscriptions.hybrid"></span>
            </div>
            <div class="columns medium-2 category-data-section">
              <div class="category-description">
                <span class="name h6" translate="subscriptions.enitireOrg"></span>
              </div>
            </div>
            <div class="columns medium-2 category-data-section">
              <ul class="category-list">
                <li ng-repeat="translation in mcpSub.hybridServices"><span translate="{{::translation}}"></span></li>
              </ul>
            </div>
          </div>
        </section>
      </article>
    </cs-card>

    <cs-card class="full pro-pack-card" ng-if="mcpSub.isProPackPurchased && mcpSub.proPackData">
      <article>
        <header>
          <h3 class="column medium-2 card-title" translate="subscriptions.premiumManagement"></h3>
        </header>
        <section>
          <div class="row category-row">
            <div class="columns medium-2 category-title">
              <span class="h5" translate="subscriptions.licenseTypes.MGMTPRO"></span>
              <span><i class="h5 icon icon-certified category-icon"></i></span>
            </div>
            <div class="columns medium-2 category-data-section">
              <cs-donut name="mcpSub.proPackData.id" value="mcpSub.proPackData.usage" max="mcpSub.proPackData.volume" ssize="48" class="text-center"></cs-donut>
              <div class="category-description">
                <div>
                  <span class="name h5" translate="subscriptions.activeUsers"></span>
                  <span ng-if="mcpSub.proPackData.usage > mcpSub.proPackData.volume" class="badge alert" translate="subscriptions.overage"></span>
                </div>
                <div class="h6 category-usage">
                  <span translate="subscriptions.usage"></span>
                  <span ng-class="{ 'warning': mcpSub.proPackData.usage > mcpSub.proPackData.volume }">{{::mcpSub.proPackData.usage}}/{{::mcpSub.proPackData.volume}}</span>
                  <span>
                    <i class="icon icon-information premium-info" tooltip="{{::mcpSub.premiumTooltip}}" tooltip-placement="right" tooltip-trigger="mouseenter" tooltip-animation="true" tooltip-append-to-body="true"></i>
                  </span>
                </div>
              </div>
            </div>
            <div class="columns medium-2 category-data-section">
              <ul class="category-list">
                <li ng-repeat="translation in mcpSub.proPackList"><span translate="{{::translation}}"></span></li>
              </ul>
            </div>
          </div>
        </section>
      </article>
    </cs-card>
  </cs-card-layout>
</div>

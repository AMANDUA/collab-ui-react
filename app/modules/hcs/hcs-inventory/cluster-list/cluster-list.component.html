<cs-page-header
  class="huron-tabs"
  title-name="{{$ctrl.groupName}}"
  back="$ctrl.back"
  back-url="$ctrl.backState"
  back-aria-label="{{::'common.back' | translate}}"
  tabs="$ctrl.tabs">
</cs-page-header>
<cs-page-sub-header ng-hide="$ctrl.groupId.toLowerCase() === $ctrl.typeUnassigned.toLowerCase()" ng-if="!$ctrl.loading">
  <cs-page-sub-header-right class="row">
    <div class="columns medium-2 hcs-right-header-filter">
        <cs-select
        name="softwareVersionSelect"
        ng-model="$ctrl.softwareVersionSelected"
        options="$ctrl.softwareVersionProfiles"
        on-change-fn="$ctrl.onSoftwareVersionChanged()"
        filter="false"
        is-disabled="$ctrl.disableSwProfileSelect"
        is-warn="{{$ctrl.disableSwProfileSelect}}"
        warn-msg="{{$ctrl.warningMsgSwProfileSelect}}">
    </div>
    </cs-select>
  </cs-page-sub-header-right>
</cs-page-sub-header>
<div class="cs-card-container cluster-list-container">
  <div class="loading-container" ng-if="$ctrl.loading">
    <i class="icon icon-2x icon-spinner"></i>
  </div>
  <cs-card-layout>
    <cs-card ng-if="!$ctrl.loading" class="cs-card--medium header-background hoverable" ng-repeat="cluster in $ctrl.clusterList">
      <article  ng-click="$ctrl.cardSelected(cluster)" hover-delay>
        <header>
          <div class="header-with-right-icon">
            <h4 class="cluster-name ellipsis" title="{{cluster.name}}">{{cluster.name}}</h4>
            <div class="right card-icon-div">
              <button type="button" class="close"
                ng-click="$ctrl.closeCard((cluster), $event)"
                ng-keydown=""
                aria-label="{{::'common.delete' | translate}}"></button>
            </div>
          </div>
        </header>
        <section class="card-body">
          <div class="card-section">
            <div  ng-repeat="application in cluster.applications">
              <span class="application-name h5">{{application.name}}</span>
              <span class="application-node-count h5">{{application.count}} {{application.count >1 ? 'nodes' : 'node'}}</span>
            </div>
          </div>
        </section>
        <footer class="cluster-list-footer">
          <span ng-switch="cluster.status" class="cluster-status">
            <div ng-switch-when="UNASSIGNED">
              <i class="icon icon-circle status-indicator danger"></i>
              <span class="h6">{{::'hcs.clusterDetail.nodeStatus.unassigned' | translate}}</span>
            </div>
            <div ng-switch-when="NO_AGENT_RUNNING">
              <i class="icon icon-circle status-indicator danger"></i>
              <span class="h6">{{::'hcs.clusterDetail.nodeStatus.noAgentRunning' | translate}}</span>
            </div>
            <div ng-switch-when="AGENT_OFFLINE">
              <i class="icon icon-circle status-indicator danger"></i>
              <span class="h6">{{::'hcs.clusterDetail.nodeStatus.agentOffline' | translate}}</span>
            </div>
            <div ng-switch-when="FAILED_UPGRADE">
              <i class="icon icon-circle status-indicator danger"></i>
              <span class="h6">{{::'hcs.clusterDetail.nodeStatus.failedUpgrade' | translate}}</span>
            </div>
            <div ng-switch-when="SOFTWARE_PROFILE_NOT_ASSIGNED">
              <i class="icon icon-circle status-indicator warning"></i>
              <span class="h6">{{::'hcs.clusterDetail.nodeStatus.swProfileNotAssigned' | translate}}</span>
            </div>
            <div ng-switch-when="NODES_NEED_ACCEPTANCE">
              <i class="icon icon-circle status-indicator warning"></i>
              <span class="h6">{{::'hcs.clusterDetail.nodeStatus.needsAcceptance' | translate}}</span>
            </div>
            <div ng-switch-when="SOFTWARE_PROFILE_DOES_NOT_COVER_ALL_APPLICATIONS">
              <i class="icon icon-circle status-indicator warning"></i>
              <span class="h6">{{::'hcs.clusterDetail.nodeStatus.swProfileNotCoverAll' | translate}}</span>
            </div>
            <div ng-switch-when="SOFTWARE_VERSION_MISMATCH">
              <i class="icon icon-circle status-indicator warning"></i>
              <span class="h6">{{::'hcs.clusterDetail.nodeStatus.swVersionMismatch' | translate}}</span>
            </div>
            <div ng-switch-when="SOFTWARE_UPGRADE_NEEDED">
              <i class="icon icon-circle status-indicator warning"></i>
              <span class="h6">{{::'hcs.clusterDetail.nodeStatus.swUpgradeNeeded' | translate}}</span>
            </div>
            <div ng-switch-when="NO_ACTIVE_VERSION">
              <i class="icon icon-circle status-indicator warning"></i>
              <span class="h6">{{::'hcs.clusterDetail.nodeStatus.noActiveVersion' | translate}}</span>
            </div>
            <div ng-switch-when="NEED_TO_UPDATE_BATCH_NUMBER">
              <i class="icon icon-circle status-indicator warning"></i>
              <span class="h6">{{::'hcs.clusterDetail.nodeStatus.needToUpdateBatchNumber' | translate}}</span>
            </div>
            <div ng-switch-when="UPGRADE_SCHEDULED">
              <i class="icon icon-circle status-indicator warning"></i>
              <span class="h6">{{::'hcs.clusterDetail.nodeStatus.upgradeScheduled' | translate}}</span>
            </div>
            <div ng-switch-when="UPGRADE_IN_PROGRESS">
              <i class="icon icon-circle status-indicator warning"></i>
              <span class="h6">{{::'hcs.clusterDetail.nodeStatus.upgradeInProgress' | translate}}</span>
            </div>
            <div ng-switch-when="OPERATIONAL">
              <i class="icon icon-circle status-indicator success"></i>
              <span class="h6">{{::'hcs.clusterDetail.nodeStatus.operational' | translate}}</span>
            </div>
          </span>
        </footer>
      </article>
    </cs-card>
  </cs-card-layout>
</div>
